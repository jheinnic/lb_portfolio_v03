AbstractEnum = require('./AbstractEnum.class.coffee')

class DynamicEnum extends AbstractEnum
  constructor: (name) ->
    # Only permit uniquely named enum keys to be created.
    Class = @getClass()
    throw new Error "DynamicEnum may only be instantiated through an immediate subclass, not directly." if Class == DynamicEnum
    throw new Error "Abstract enumerations may not instantiate values" if Class._ABSTRACT
    throw new Error "#{Class.name} already has an enumerated value named #{name}!" if Class[name]?

module.exports = DynamicEnum
